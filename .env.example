# ServalSheets Environment Configuration

# ===========================
# REQUIRED FOR PRODUCTION
# ===========================

# JWT signing secret (generate: openssl rand -hex 32)
# REQUIRED in production mode
JWT_SECRET=your-jwt-secret-here

# OAuth state HMAC secret (generate: openssl rand -hex 32)
# REQUIRED in production mode
STATE_SECRET=your-state-secret-here

# OAuth client secret (generate: openssl rand -hex 32)
# REQUIRED in production mode
OAUTH_CLIENT_SECRET=your-oauth-client-secret-here

# Comma-separated list of allowed OAuth redirect URIs
# REQUIRED in production - prevents open redirect vulnerability
ALLOWED_REDIRECT_URIS=http://localhost:3000/callback,https://your-app.com/callback

# ===========================
# NODE ENVIRONMENT
# ===========================

# Environment mode (development, production, test)
# Set to 'production' for production deployments
NODE_ENV=development

# ===========================
# SERVER CONFIGURATION
# ===========================

# Server port (for HTTP/SSE server)
PORT=3000

# Alternative: HTTP_PORT (used by lifecycle.ts)
HTTP_PORT=3000

# Server host binding (default: 127.0.0.1 for security)
# 127.0.0.1 = localhost only (secure, recommended for development)
# 0.0.0.0 = all network interfaces (use only in production with proper firewall)
HOST=127.0.0.1

# ===========================
# OAUTH CONFIGURATION
# ===========================

# OAuth issuer URL (base URL of your server)
OAUTH_ISSUER=https://servalsheets.example.com

# OAuth client ID
OAUTH_CLIENT_ID=servalsheets

# OAuth token expiration (seconds)
# Access tokens are short-lived JWT tokens for API access
# Refresh tokens are long-lived for obtaining new access tokens
# Default: ACCESS_TOKEN_TTL=3600 (1 hour), REFRESH_TOKEN_TTL=2592000 (30 days)
# ACCESS_TOKEN_TTL=3600
# REFRESH_TOKEN_TTL=2592000

# ===========================
# GOOGLE API CREDENTIALS
# ===========================

# Google OAuth Client ID (for Google Sheets access)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com

# Google OAuth Client Secret
GOOGLE_CLIENT_SECRET=your-google-client-secret

# ===========================
# TOKEN ENCRYPTION
# ===========================

# Encryption key for token storage (generate: openssl rand -hex 32)
# REQUIRED in production mode for GOOGLE_TOKEN_STORE_PATH
# Must be 64 hex characters (32 bytes)
# Generate with: openssl rand -hex 32
# IMPORTANT: Keep this secret! Never commit to version control!
ENCRYPTION_KEY=your-encryption-key-here

# ===========================
# CORS CONFIGURATION (HTTP/SSE/Remote modes)
# ===========================

# Comma-separated list of allowed CORS origins
# MEDIUM-005 FIX: Clear documentation for CORS security
#
# IMPORTANT: Configure appropriately for your deployment:
#
# Development (permissive, for local testing):
#   CORS_ORIGINS=http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000
#
# Production (restrictive, whitelist specific origins):
#   CORS_ORIGINS=https://claude.ai,https://claude.com,https://your-app.com
#
# WARNING: Never use '*' (allow all) in production - security vulnerability!
#
# Default: Claude AI domains + localhost for development
CORS_ORIGINS=https://claude.ai,https://claude.com,http://localhost:3000

# ===========================
# SESSION STORAGE (HTTP/SSE/Remote modes)
# ===========================

# Session Store Type (memory | redis)
# CRITICAL FOR PRODUCTION: Use 'redis' for persistent OAuth sessions
#
# memory: Simple, fast, but sessions lost on restart (development only)
# redis: Persistent, distributed, required for:
#   - Production deployments
#   - Load-balanced/multi-instance setups
#   - High availability requirements
#   - OAuth session persistence across restarts
#
# Default: memory (WARNING: not suitable for production)
SESSION_STORE_TYPE=memory

# Redis URL for session storage (REQUIRED when SESSION_STORE_TYPE=redis)
# Format: redis://[username]:[password]@[host]:[port]/[db]
# Examples:
#   - Local: redis://localhost:6379
#   - With auth: redis://:password@localhost:6379
#   - Remote: redis://user:pass@redis.example.com:6379/0
#
# REDIS_URL=redis://localhost:6379

# Streamable HTTP event store (resumability)
# Controls how long resumable events are kept and how many are stored per session.
# STREAMABLE_HTTP_EVENT_TTL_MS=300000
# STREAMABLE_HTTP_EVENT_MAX_EVENTS=5000

# Maximum sessions per user (default: 5)
# Prevents session exhaustion attacks
# MAX_SESSIONS_PER_USER=5

# Session TTL in seconds (default: 86400 = 24 hours)
# Sessions older than this are automatically cleaned up
# SESSION_TTL_SECONDS=86400

# Log level (debug, info, warn, error)
# LOG_LEVEL=info

# ===========================
# TASK STORAGE (MCP SEP-1686)
# ===========================

# Task Store Backend (auto-detected based on REDIS_URL)
#
# The server automatically selects the task store based on environment:
#   - If REDIS_URL is set: Uses RedisTaskStore (distributed, persistent)
#   - If REDIS_URL is not set: Uses InMemoryTaskStore (single-instance)
#
# InMemoryTaskStore (development):
#   - Simple, fast, low overhead
#   - Task state stored in process memory
#   - Tasks lost on server restart
#   - Suitable for single-instance development
#
# RedisTaskStore (production):
#   - Distributed task state across multiple instances
#   - Tasks persist across server restarts
#   - Required for:
#     * Load-balanced/multi-instance deployments
#     * Horizontal scaling
#     * High availability
#     * Task state sharing between servers
#   - Automatic TTL-based expiration
#   - Real-time task status notifications via pub/sub
#
# IMPORTANT: If you set REDIS_URL, the server will automatically use Redis
# for BOTH session storage AND task storage. No additional configuration needed.
#
# For production with multiple instances, ensure REDIS_URL is set.
# Example: REDIS_URL=redis://localhost:6379
#
# Task Retention:
# - Tasks automatically expire based on their TTL (default: 1 hour)
# - Redis handles cleanup automatically via key expiration
# - No manual cleanup required

# ===========================
# PERFORMANCE TUNING
# ===========================

# Enable response caching (true | false, default: true)
# Set to 'false' to disable (any other value enables)
# CACHE_ENABLED=true

# Maximum cache size in megabytes
# CACHE_MAX_SIZE_MB=100

# Cache entry time-to-live in milliseconds (5 minutes = 300000ms)
# CACHE_TTL_MS=300000

# ===========================
# FEATURE FLAGS (ROLLOUT)
# ===========================

# Enable DataFilter batch operations (batch_read/batch_write/batch_clear with dataFilters)
ENABLE_DATAFILTER_BATCH=true

# Enable tableId-based appends (append to Tables API)
ENABLE_TABLE_APPENDS=true

# Enable payload size validation + warnings (recommended for production)
ENABLE_PAYLOAD_VALIDATION=true

# Enable legacy SSE endpoints (/sse, /sse/message) for backward compatibility
ENABLE_LEGACY_SSE=true

# ===========================
# REQUEST DEDUPLICATION & RESULT CACHING
# ===========================

# Enable request deduplication (true | false, default: true)
# Prevents duplicate identical requests within the timeout window
# Set to 'false' to disable (any other value enables)
# DEDUPLICATION_ENABLED=true

# Deduplication timeout in milliseconds (30 seconds = 30000ms)
# How long to wait before considering a request timed out
# DEDUPLICATION_TIMEOUT=30000

# Maximum pending requests to track (default: 1000)
# DEDUPLICATION_MAX_PENDING=1000

# Enable result caching (true | false, default: true)
# Caches completed request results to eliminate redundant API calls
# Expected impact: 30-50% reduction in duplicate requests, 80-95% faster
# RESULT_CACHE_ENABLED=true

# Result cache TTL in milliseconds (60 seconds = 60000ms)
# Cached results expire after this duration
# Recommended: 60000ms (1 minute) for most use cases
# RESULT_CACHE_TTL=60000

# Maximum cached results (default: 1000)
# Uses LRU eviction when limit is reached
# RESULT_CACHE_MAX_SIZE=1000

# ===========================
# PREDICTIVE PREFETCHING SYSTEM (Task 2.2)
# ===========================

# Enable predictive prefetching (true | false, default: true)
# Intelligently prefetches data based on access patterns to reduce latency
# PREFETCH_ENABLED=true

# Maximum concurrent prefetch requests (default: 2)
# Low concurrency to avoid interfering with user-initiated requests
# PREFETCH_CONCURRENCY=2

# Minimum confidence threshold for prefetching (0.0-1.0, default: 0.5)
# Only prefetch predictions with confidence above this threshold
# Higher values = fewer but more accurate prefetches
# PREFETCH_MIN_CONFIDENCE=0.5

# Enable background refresh (true | false, default: true)
# Refreshes cache entries before they expire to ensure fresh data
# PREFETCH_BACKGROUND_REFRESH=true

# Maximum access pattern history (default: 1000)
# Number of access records to keep for pattern detection
# PREFETCH_MAX_HISTORY=1000

# Pattern detection time window in milliseconds (default: 300000 = 5 minutes)
# Only patterns observed within this window are considered active
# PREFETCH_PATTERN_WINDOW=300000

# ===========================
# BATCH REQUEST TIME WINDOWS (Task 2.3)
# ===========================

# Enable batch request time windows (true | false, default: true)
# Collects operations within a time window and batches them into single API calls
# Expected impact: 20-40% reduction in API calls
# BATCHING_ENABLED=true

# Batch collection window in milliseconds (default: 50)
# Operations within this window are grouped and executed together
# Shorter window = less batching, faster individual operations
# Longer window = more batching, potential slight delay
# BATCHING_WINDOW_MS=50

# Maximum operations per batch (default: 100)
# Prevents excessively large batches that could timeout
# Google Sheets API supports up to 100 requests per batchUpdate
# BATCHING_MAX_SIZE=100

# Enable verbose batching logs (true | false, default: false)
# Logs batch execution details for debugging and monitoring
# BATCHING_VERBOSE=false

# ===========================
# SMART WORKFLOW ENGINE (Task 3.1)
# ===========================

# Enable smart workflow suggestions (true | false, default: true)
# Automatically detects common multi-step operations and offers to execute them as workflows
# Expected impact: 50% reduction in tool calls for common tasks
# WORKFLOWS_ENABLED=true

# Minimum confidence for workflow suggestions (0.0-1.0, default: 0.7)
# Only workflows with confidence above this threshold are suggested
# Higher values = fewer but more relevant suggestions
# WORKFLOWS_MIN_CONFIDENCE=0.7

# Maximum workflows to suggest at once (default: 3)
# Limits the number of workflow suggestions shown to user
# WORKFLOWS_MAX_SUGGESTIONS=3

# Enable verbose workflow logs (true | false, default: false)
# Logs workflow detection, execution, and step completion for debugging
# WORKFLOWS_VERBOSE=false

# ===========================
# OPERATION PLANNING AGENT (Task 3.2)
# ===========================

# Enable operation planning agent (true | false, default: true)
# Converts natural language intent into executable multi-step operation plans
# Expected impact: Natural language interface, 5x faster complex operations
# PLANNING_ENABLED=true

# Maximum steps per plan (default: 10)
# Limits plan complexity to prevent runaway planning
# PLANNING_MAX_STEPS=10

# Maximum API calls per plan (default: 50)
# Budget constraint for cost control
# PLANNING_MAX_API_CALLS=50

# Require user confirmation before execution (true | false, default: true)
# Show plan and wait for approval before executing
# PLANNING_REQUIRE_CONFIRMATION=true

# Auto-create snapshots before execution (true | false, default: true)
# Creates safety snapshot for rollback capability
# PLANNING_AUTO_SNAPSHOT=true

# Auto-rollback on failure (true | false, default: true)
# Automatically restore snapshot if plan execution fails
# PLANNING_AUTO_ROLLBACK=true

# Enable verbose planning logs (true | false, default: false)
# Logs plan generation, steps, and execution details
# PLANNING_VERBOSE=false

# ===========================
# AI INSIGHTS SERVICE (Task 3.3)
# ===========================

# Enable AI-powered insights generation (true | false, default: true)
# Automatically detects anomalies, relationships, patterns, and predictions
# Expected impact: Advanced data analysis with zero manual configuration
# INSIGHTS_ENABLED=true

# Minimum confidence threshold for insights (0.0-1.0, default: 0.6)
# Only insights with confidence above this threshold are returned
# Higher values = fewer but more reliable insights
# INSIGHTS_MIN_CONFIDENCE=0.6

# Maximum insights per request (default: 50)
# Limits the number of insights returned to prevent overwhelming results
# INSIGHTS_MAX_PER_REQUEST=50

# Enable insights caching (true | false, default: true)
# Caches insights to avoid redundant analysis
# INSIGHTS_CACHE_ENABLED=true

# Insights cache TTL in milliseconds (default: 300000 = 5 minutes)
# How long to cache insights before regenerating
# INSIGHTS_CACHE_TTL=300000

# === Anomaly Detection Configuration ===

# Enable outlier detection (true | false, default: true)
# Detects values that deviate significantly from the norm using z-score
# INSIGHTS_DETECT_OUTLIERS=true

# Outlier threshold (z-score, default: 3.0)
# Values exceeding this many standard deviations are flagged as outliers
# Common values: 2.0 (strict), 3.0 (balanced), 4.0 (permissive)
# INSIGHTS_OUTLIER_THRESHOLD=3.0

# Enable missing data detection (true | false, default: true)
# Identifies cells with missing or null values
# INSIGHTS_DETECT_MISSING=true

# Enable duplicate detection (true | false, default: true)
# Finds duplicate values within columns
# INSIGHTS_DETECT_DUPLICATES=true

# Enable format inconsistency detection (true | false, default: true)
# Identifies columns with mixed data types (numbers, text, etc.)
# INSIGHTS_DETECT_FORMAT_ISSUES=true

# Enable invalid value detection (true | false, default: true)
# Detects error values (#ERROR, #DIV/0!, N/A, etc.)
# INSIGHTS_DETECT_INVALID_VALUES=true

# Minimum sample size for anomaly detection (default: 10)
# Columns with fewer data points are skipped
# INSIGHTS_MIN_SAMPLE_SIZE=10

# === Relationship Discovery Configuration ===

# Enable correlation analysis (true | false, default: true)
# Discovers statistical relationships between numeric columns
# INSIGHTS_DETECT_CORRELATIONS=true

# Minimum correlation coefficient (0.0-1.0, default: 0.5)
# Only correlations above this threshold are reported
# INSIGHTS_MIN_CORRELATION=0.5

# Enable dependency detection (true | false, default: true)
# Identifies columns that depend on each other
# INSIGHTS_DETECT_DEPENDENCIES=true

# Enable pattern detection (true | false, default: true)
# Finds recurring patterns and sequences in data
# INSIGHTS_DETECT_PATTERNS=true

# Maximum columns to compare (default: 10)
# Limits correlation analysis to prevent performance issues
# INSIGHTS_MAX_COLUMNS_TO_COMPARE=10

# === Prediction Configuration ===

# Enable trend analysis (true | false, default: true)
# Detects increasing, decreasing, or stable trends
# INSIGHTS_DETECT_TRENDS=true

# Enable forecasting (true | false, default: true)
# Predicts future values based on historical data
# INSIGHTS_ENABLE_FORECASTING=true

# Number of periods to forecast (default: 5)
# How many future data points to predict
# INSIGHTS_FORECAST_PERIODS=5

# Minimum historical data points for predictions (default: 10)
# Requires at least this many data points before making predictions
# INSIGHTS_MIN_HISTORICAL_POINTS=10

# Prediction confidence level (0.0-1.0, default: 0.95)
# Confidence level for prediction intervals
# INSIGHTS_CONFIDENCE_LEVEL=0.95

# Enable verbose insights logs (true | false, default: false)
# Logs insight generation details for debugging
# INSIGHTS_VERBOSE=false

# ===========================
# TOOL ORCHESTRATION (Task 3.4)
# ===========================

# Enable tool orchestration (true | false, default: true)
# Manages multi-tool workflows with intelligent tool selection and chaining
# Expected impact: Automated multi-step operations, 80% reduction in manual tool calls
# ORCHESTRATOR_ENABLED=true

# Default tool selection strategy (automatic | cost_optimized | performance_optimized | quality_optimized)
# automatic: Balanced selection based on intent matching
# cost_optimized: Minimizes API call costs
# performance_optimized: Minimizes execution time
# quality_optimized: Maximizes success rate
# ORCHESTRATOR_DEFAULT_STRATEGY=automatic

# Maximum concurrent tool calls (default: 5)
# How many tools can execute in parallel
# ORCHESTRATOR_MAX_CONCURRENT=5

# Enable automatic retries (true | false, default: true)
# Automatically retry failed tool calls
# ORCHESTRATOR_ENABLE_RETRIES=true

# Default maximum retries per tool call (default: 3)
# Number of retry attempts before giving up
# ORCHESTRATOR_MAX_RETRIES=3

# Retry delay in milliseconds (default: 1000)
# Time to wait between retry attempts
# ORCHESTRATOR_RETRY_DELAY_MS=1000

# Enable parameter inference (true | false, default: true)
# Automatically infer missing parameters from context and previous results
# ORCHESTRATOR_ENABLE_PARAM_INFERENCE=true

# Enable context propagation (true | false, default: true)
# Pass context between chained tool calls
# ORCHESTRATOR_ENABLE_CONTEXT_PROPAGATION=true

# Tool call timeout in milliseconds (default: 30000 = 30 seconds)
# Maximum time to wait for a single tool call
# ORCHESTRATOR_TOOL_TIMEOUT_MS=30000

# Workflow timeout in milliseconds (default: 300000 = 5 minutes)
# Maximum time to wait for entire workflow
# ORCHESTRATOR_WORKFLOW_TIMEOUT_MS=300000

# Enable workflow result caching (true | false, default: true)
# Cache tool call results to avoid redundant operations
# ORCHESTRATOR_ENABLE_CACHING=true

# Workflow cache TTL in milliseconds (default: 300000 = 5 minutes)
# How long to cache workflow results
# ORCHESTRATOR_CACHE_TTL=300000

# Enable verbose orchestrator logs (true | false, default: false)
# Logs tool selection, execution, and workflow details
# ORCHESTRATOR_VERBOSE=false

# ===========================
# TRANSACTION SYSTEM (Task 4.1)
# ===========================

# Enable transaction support (true | false, default: true)
# Provides multi-operation atomicity with automatic snapshot and rollback
# Expected impact: 80% fewer API calls, zero partial failures
# TRANSACTIONS_ENABLED=true

# Auto-create snapshots before transactions (true | false, default: true)
# Creates safety snapshot for rollback capability
# TRANSACTIONS_AUTO_SNAPSHOT=true

# Auto-rollback on error (true | false, default: true)
# Automatically restores snapshot if any operation fails
# TRANSACTIONS_AUTO_ROLLBACK=true

# Maximum operations per transaction (default: 100)
# Limits transaction complexity
# TRANSACTIONS_MAX_OPERATIONS=100

# Transaction timeout in milliseconds (default: 300000 = 5 minutes)
# Maximum time to wait for transaction completion
# TRANSACTIONS_TIMEOUT_MS=300000

# Snapshot retention period in milliseconds (default: 3600000 = 1 hour)
# How long to keep snapshots before cleanup
# TRANSACTIONS_SNAPSHOT_RETENTION_MS=3600000

# Maximum concurrent transactions (default: 10)
# How many transactions can be active simultaneously
# TRANSACTIONS_MAX_CONCURRENT=10

# Default isolation level (read_uncommitted | read_committed | serializable, default: read_committed)
# Transaction isolation level for consistency
# TRANSACTIONS_ISOLATION_LEVEL=read_committed

# Enable verbose transaction logs (true | false, default: false)
# Logs transaction lifecycle, operations, and batch requests
# TRANSACTIONS_VERBOSE=false

# ===========================
# CONFLICT DETECTION (Task 4.2)
# ===========================

# Enable conflict detection (true | false, default: true)
# Detects concurrent modifications in multi-user scenarios
# Expected impact: Zero data loss from concurrent edits
# CONFLICT_DETECTION_ENABLED=true

# Check conflicts before write operations (true | false, default: true)
# Automatically validates no conflicts exist before writing
# CONFLICT_CHECK_BEFORE_WRITE=true

# Auto-resolve conflicts (true | false, default: false)
# Automatically resolves conflicts using default strategy
# CONFLICT_AUTO_RESOLVE=false

# Default resolution strategy (overwrite | merge | cancel | last_write_wins | first_write_wins | manual)
# Strategy to use for automatic conflict resolution
# CONFLICT_DEFAULT_RESOLUTION=manual

# Version cache TTL in milliseconds (default: 300000 = 5 minutes)
# How long to cache range versions
# CONFLICT_VERSION_CACHE_TTL=300000

# Maximum versions to cache (default: 1000)
# Limits memory usage for version tracking
# CONFLICT_MAX_VERSIONS_CACHE=1000

# Enable optimistic locking (true | false, default: false)
# Requires version matching for all write operations
# CONFLICT_OPTIMISTIC_LOCKING=false

# Conflict check timeout in milliseconds (default: 5000 = 5 seconds)
# Maximum time to wait for conflict check
# CONFLICT_CHECK_TIMEOUT_MS=5000

# Enable verbose conflict logs (true | false, default: false)
# Logs conflict detection and resolution details
# CONFLICT_VERBOSE=false

# ===========================
# VALIDATION ENGINE (Task 4.4)
# ===========================

# Enable validation engine (true | false, default: true)
# Comprehensive data validation with builtin validators
# Expected impact: Better data quality, fewer errors, proactive validation
# VALIDATION_ENABLED=true

# Validate before operations (true | false, default: true)
# Automatically validates data before executing write operations
# VALIDATION_BEFORE_OPERATIONS=true

# Stop on first error (true | false, default: false)
# Stops validation on first error encountered
# VALIDATION_STOP_ON_FIRST_ERROR=false

# Maximum errors to collect (default: 100)
# Limits the number of validation errors reported
# VALIDATION_MAX_ERRORS=100

# Async validation timeout in milliseconds (default: 5000 = 5 seconds)
# Maximum time to wait for async validators
# VALIDATION_ASYNC_TIMEOUT_MS=5000

# Enable validation caching (true | false, default: true)
# Caches validation results to avoid redundant checks
# VALIDATION_CACHE_ENABLED=true

# Validation cache TTL in milliseconds (default: 60000 = 1 minute)
# How long to cache validation results
# VALIDATION_CACHE_TTL=60000

# Enable verbose validation logs (true | false, default: false)
# Logs validation execution and rule details
# VALIDATION_VERBOSE=false

# ===========================
# CONNECTION POOLING
# ===========================

# Maximum number of persistent HTTP connections to Google APIs
# Higher values allow more parallel requests but consume more resources
# Default: 50 (balanced for most workloads)
# GOOGLE_API_MAX_SOCKETS=50

# Keep-alive timeout for persistent connections (milliseconds)
# How long to keep idle connections open for reuse
# Default: 30000 (30 seconds)
# GOOGLE_API_KEEPALIVE_TIMEOUT=30000

# Diff engine concurrent sheet fetches (prevents OOM on large spreadsheets)
# How many sheets to process in parallel when capturing state
# Default: 10 (balanced between speed and memory usage)
# DIFF_ENGINE_CONCURRENCY=10

# ===========================
# HTTP/2 CONNECTION HEALTH
# ===========================

# Enable HTTP/2 protocol for Google API connections (true | false)
# HTTP/2 provides 5-15% latency reduction via request multiplexing
# Default: true
# GOOGLE_API_HTTP2_ENABLED=true

# Maximum idle time before proactive connection refresh (milliseconds)
# Google closes idle HTTP/2 connections after ~5 minutes
# Default: 300000 (5 minutes)
# GOOGLE_API_MAX_IDLE_MS=300000

# Keepalive health check interval (milliseconds)
# Set to 0 to disable periodic health checks
# Default: 60000 (1 minute)
# GOOGLE_API_KEEPALIVE_INTERVAL_MS=60000

# Consecutive API failures before automatic connection reset
# Triggers fresh HTTP/2 negotiation after threshold
# Default: 3
# GOOGLE_API_CONNECTION_RESET_THRESHOLD=3

# ===========================
# RATE LIMITING
# ===========================

# Google Sheets API rate limits (per minute)
# Default: 300 reads/min, 60 writes/min (matches Google's default quotas)
# RATE_LIMIT_READS_PER_MINUTE=300
# RATE_LIMIT_WRITES_PER_MINUTE=60

# ===========================
# CIRCUIT BREAKER
# ===========================

# Circuit breaker failure threshold (number of consecutive failures before opening)
# CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# Circuit breaker success threshold (successes in half-open before closing)
# CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2

# Circuit breaker timeout (milliseconds to stay open before trying half-open)
# CIRCUIT_BREAKER_TIMEOUT_MS=30000

# ===========================
# TRACING & OBSERVABILITY
# ===========================

# Enable OpenTelemetry tracing (set to 'true' to enable)
# OTEL_ENABLED=false

# Enable OpenTelemetry span logging (set to 'true' to enable)
# Logs spans to console for debugging
# OTEL_LOG_SPANS=false

# Tracing sample rate (0.0 to 1.0) - 0.1 = sample 10% of requests
# TRACING_SAMPLE_RATE=0.1

# ===========================
# SAFETY LIMITS
# ===========================

# Maximum number of concurrent Google API requests
# MAX_CONCURRENT_REQUESTS=10

# Google API call timeout in milliseconds (30 seconds = 30000ms)
# Enforces deadline for individual Google Sheets/Drive API requests
# GOOGLE_API_TIMEOUT_MS=30000

# Request timeout in milliseconds (30 seconds = 30000ms)
# REQUEST_TIMEOUT_MS=30000

# Graceful shutdown timeout in milliseconds (10 seconds = 10000ms)
# GRACEFUL_SHUTDOWN_TIMEOUT_MS=10000

# ===========================
# SECURITY NOTES
# ===========================

# 1. Generate strong secrets:
#    openssl rand -hex 32
#
# 2. Never commit secrets to version control
#
# 3. Rotate secrets regularly (every 90 days recommended)
#
# 4. Keep JWT_SECRET and STATE_SECRET different
#
# 5. In production, ensure NODE_ENV=production
#
# 6. Restrict ALLOWED_REDIRECT_URIS to your actual app URLs
#
# 7. Consider using a secrets manager (AWS Secrets Manager, Vault, etc.)
