# ServalSheets Live State
> Auto-generated by `.serval/generate-state.mjs` — DO NOT EDIT MANUALLY
> Generated: 2026-02-21 03:50:14 UTC

## Version
| Metric | Value | Source |
|--------|-------|--------|
| Tools | 22 | src/schemas/action-counts.ts |
| Actions | 315 | src/schemas/action-counts.ts |
| Package Version | 1.7.0 | package.json |
| Protocol | 2025-11-25 | src/version.ts |
| TypeScript | ✅ compiles | tsc --noEmit |

## Git
| Metric | Value |
|--------|-------|
| Branch | main |
| Last Commit | cd250a3 feat: implement schema versioning middleware and time-travel debugger |
| Working Tree | 569 uncommitted files |

## Tool Inventory
| Tool | Actions |
|------|---------|
| sheets_advanced | 31 |
| sheets_analyze | 16 |
| sheets_appsscript | 18 |
| sheets_auth | 4 |
| sheets_bigquery | 17 |
| sheets_collaborate | 35 |
| sheets_composite | 11 |
| sheets_confirm | 5 |
| sheets_core | 19 |
| sheets_data | 19 |
| sheets_dependencies | 7 |
| sheets_dimensions | 28 |
| sheets_federation | 4 |
| sheets_fix | 1 |
| sheets_format | 24 |
| sheets_history | 7 |
| sheets_quality | 4 |
| sheets_session | 26 |
| sheets_templates | 8 |
| sheets_transaction | 6 |
| sheets_visualize | 18 |
| sheets_webhook | 7 |

## Monorepo
| Component | Status |
|-----------|--------|
| serval-core | v0.1.0 |
| Adapter layer | google-sheets-backend.ts, index.ts |

## Key Files
| File | Size |
|------|------|
| src/server.ts | 1439 lines |
| src/http-server.ts | 2858 lines |
| src/handlers/base.ts | 1492 lines |
| src/schemas/action-counts.ts | 43 lines |

## Test Health
| Metric | Value |
|--------|-------|
| Status | unknown |
| Summary | Could not run tests (timeout or error) |

## Feature Flags (defaults from src/config/env.ts)
| Flag | Default |
|------|---------|
| ENABLE_BACKGROUND_ANALYSIS | ✅ ON |
| ENABLE_DATAFILTER_BATCH | ✅ ON |
| ENABLE_TABLE_APPENDS | ✅ ON |
| ENABLE_PAYLOAD_VALIDATION | ✅ ON |
| ENABLE_LEGACY_SSE | ✅ ON |
| ENABLE_AGGRESSIVE_FIELD_MASKS | ✅ ON |
| ENABLE_CONDITIONAL_REQUESTS | ✅ ON |
| ENABLE_AUTO_CONNECTION_RESET | ✅ ON |
| ENABLE_REQUEST_MERGING | ✅ ON |
| ENABLE_PARALLEL_EXECUTOR | ✅ ON |
| ENABLE_GRANULAR_PROGRESS | ✅ ON |
| ENABLE_RBAC | ❌ OFF |
| ENABLE_AUDIT_LOGGING | ✅ ON |
| ENABLE_TENANT_ISOLATION | ❌ OFF |
| ENABLE_IDEMPOTENCY | ✅ ON |
| ENABLE_COST_TRACKING | ❌ OFF |
| ENABLE_PREFETCH | ✅ ON |

## Test Infrastructure
| File | Exists |
|------|--------|
| tests/audit/action-coverage-fixtures.ts | ✅ |
| tests/audit/action-coverage.test.ts | ✅ |
| tests/audit/performance-profile.bench.ts | ✅ |
| tests/audit/memory-leaks.test.ts | ✅ |
| scripts/generate-health-snapshot.ts | ✅ |
| scripts/audit-gate.sh | ✅ |
| Test files | 288 total |

## Audit Commands
```bash
npm run audit:coverage   # 315-action coverage test
npm run audit:perf       # Performance benchmarks
npm run audit:memory     # Memory leak detection
npm run audit:gate       # CI gate (7 checks)
npm run audit:snapshot   # Full health report
npm run audit:full       # All of the above
```

## Known Issues
- ESLint may OOM in low-memory environments (~3GB heap needed) — use `npm run verify:safe`
- Silent fallback checker: 0 false positives (all annotated with inline comments)

## Verification Commands
```bash
npm run verify:safe      # Safe verification (skips lint — use when ESLint OOMs)
npm run verify           # Full verification (typecheck + lint + test + drift)
npm run schema:commit    # After schema changes
npm run test:fast        # Quick test suite
npm run gates            # Full gate pipeline (G0-G5)
```
